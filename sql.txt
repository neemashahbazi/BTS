mysql> create database db_bts; -- Create the new database
mysql> create user 'root'@'localhost' identified by '123456'; -- Creates the user
mysql> grant all on db_bts.* to 'root'@'localhost'; -- Gives all the privileges to the new user on the newly created database



CREATE  TABLE db_bts.u_users (
  username VARCHAR(20) NOT NULL ,
  password VARCHAR(20) NOT NULL ,
  enabled TINYINT NOT NULL DEFAULT 1 ,
  PRIMARY KEY (username));

  INSERT INTO db_bts.u_users(username,password,enabled) VALUES ('trader','trader', true);
  INSERT INTO db_bts.u_users(username,password,enabled) VALUES ('client','client', true);

  CREATE TABLE db_bts.u_roles (
    user_role_id int(11) NOT NULL AUTO_INCREMENT,
    username varchar(20) NOT NULL,
    role varchar(20) NOT NULL,
    PRIMARY KEY (user_role_id),
    UNIQUE KEY uni_username_role (role,username),
    KEY fk_username_idx (username),
    CONSTRAINT fk_username FOREIGN KEY (username) REFERENCES db_bts.u_users (username));


INSERT INTO db_bts.u_roles(username, role) VALUES ('trader', 'TRADER');
INSERT INTO db_bts.u_roles (username, role) VALUES ('client', 'CLIENT');






CREATE TABLE u_client (
     id MEDIUMINT NOT NULL REFERENCES u_user(id) ,
     firstname VARCHAR(30) NOT NULL,
     lastname VARCHAR(30) NOT NULL,
     phone VARCHAR(10) ,
	 cellphone VARCHAR(10) ,
	 email VARCHAR(30),
	 level INT DEFAULT 3,
	 balance INT DEFAULT 0,
	 fiat_currency INT DEFAULT 0,
	 trader_id INT NOT NULL REFERENCES u_trader(id),
	 street VARCHAR(30),
	 city VARCHAR(30),
	 state VARCHAR(30),
	 zipcode CHAR(5),
     PRIMARY KEY (id)
);

CREATE TABLE u_trader (
     id MEDIUMINT NOT NULL REFERENCES u_user(id) ,
     firstname VARCHAR(30) NOT NULL,
     lastname VARCHAR(30) NOT NULL,
     PRIMARY KEY (id)
);


CREATE TABLE trx_transaction (
     id MEDIUMINT NOT NULL AUTO_INCREMENT,
     date DATETIME NOT NULL,
     time TIMESTAMP NOT NULL,
     PRIMARY KEY (id)
);

